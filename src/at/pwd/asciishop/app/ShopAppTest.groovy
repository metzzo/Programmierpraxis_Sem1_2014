package at.pwd.asciishop.app

import at.pwd.asciishop.helper.IOHelper

/**
 * Created by Robert on 06.11.2014.
 */
class ShopAppTest extends GroovyTestCase {
    def app, input, output
    def data = [
            [
                    'input': 'create 10 10\n' +
                            'create 20 5',
                    'output': 'UNKNOWN COMMAND\n'
            ],
            [
                    'input': 'create 5 2\n' +
                            'undo\n' +
                            'load END\n' +
                            '1.*..\n' +
                            '.*.*.\n' +
                            'END\n' +
                            'load END\n' +
                            '2.+..\n' +
                            '.+.+.\n' +
                            'END\n' +
                            'load END\n' +
                            '3.-..\n' +
                            '.-.-.\n' +
                            'END\n' +
                            'load END\n' +
                            '4.#..\n' +
                            '.#.#.\n' +
                            'END\n' +
                            'undo\n' +
                            'undo\n' +
                            'undo\n' +
                            'print\n' +
                            'undo\n' +
                            'undo',
                    'output': 'STACK EMPTY\n' +
                            'STACK USAGE 3/6\n' +
                            'STACK USAGE 2/3\n' +
                            'STACK USAGE 1/3\n' +
                            '1.*..\n' +
                            '.*.*.\n' +
                            '\n' +
                            'STACK USAGE 0/3\n' +
                            'STACK EMPTY\n'
            ],
            [
                    'input': 'create 41 20\n' +
                            'centroid .\n' +
                            'load XXX\n' +
                            '.........................................\n' +
                            '.....!\\_________________________/!\\......\n' +
                            '.....!!.........................!!.\\.....\n' +
                            '.....!!.........................!!..\\....\n' +
                            '.....!!.........................!!..!....\n' +
                            '.....!!...........PP............!!..!....\n' +
                            '.....!!.........................!!..!....\n' +
                            '.....!!.........................!!..!....\n' +
                            '.....!!.........................!!..!....\n' +
                            '.....!!.........................!!../....\n' +
                            '.....!!_________________________!!./.....\n' +
                            '.....!/_________________________\\!/......\n' +
                            '........__\\_________________/__/!_.......\n' +
                            '.......!_______________________!/.)......\n' +
                            '.....________________________....(__.....\n' +
                            '..../oooo..oooo..oooo..oooo./!..._..)_...\n' +
                            '.../ooooooooooooooooooooooo/./..(_)_(_)..\n' +
                            '../ooooooooooooooooooooooo/./....(o.o)...\n' +
                            './C=_____________________/_/....==\\o/==..\n' +
                            '.........................................\n' +
                            'XXX\n' +
                            'centroid o\n' +
                            'replace o .\n' +
                            'centroid o',
                    'output': '(20,10)\n' +
                            '(16,16)\n' +
                            'null\n'
            ],
            [
                    'input' : 'create 30 27\n' +
                            'load END\n' +
                            '============,.V+.;============\n' +
                            '===========;.X##..;===========\n' +
                            '===========..####..===========\n' +
                            '==========,.##M###.:==========\n' +
                            '=========;.R##WW##=.;=========\n' +
                            '=========..##MWMW##,.=========\n' +
                            '========:.I##WWMWW#W.,========\n' +
                            '=======;.:##WWWWWW##I.;=======\n' +
                            '=======:.W########M##..=======\n' +
                            '=======.:############V.;======\n' +
                            '=======.####...,.,M###,.======\n' +
                            '======,.###:..+++;,B..#.;=====\n' +
                            '=====;.#;.#i+YXVVY:#V.#..:====\n' +
                            '====:..#..##.RYYIt##...#=.,===\n' +
                            '==;..+#;...#######W....##W..:=\n' +
                            ':..t###......iVV=....,.+#iM#..\n' +
                            '.B#i,#..,,..........,,..#,..#I\n' +
                            'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                            ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                            '.i#=MV..,,,,.,,,,,,.,,,..###..\n' +
                            ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                            '..M#M..,,,,.,.,,,,,,,:,,.=##..\n' +
                            'i###M..,...........,,:,,..###.\n' +
                            '.####........=II;.....,,.;##R.\n' +
                            ',...#....X####MW###B.....Wi..:\n' +
                            '==;,##,###;........##i...#;,==\n' +
                            '===,.IVi..,;======:..B#B#t.;==\n' +
                            'END\n' +
                            'clear\n' +
                            'undo\n' +
                            'centroid W\n' +
                            'clear\n' +
                            'clear\n' +
                            'clear\n' +
                            'clear\n' +
                            'undo\n' +
                            'undo\n' +
                            'undo\n' +
                            'centroid W\n' +
                            'undo\n' +
                            'centroid W\n' +
                            'undo\n' +
                            'undo\n',
                    'output': 'STACK USAGE 1/3\n' +
                            '(16,9)\n' +
                            'STACK USAGE 4/6\n' +
                            'STACK USAGE 3/6\n' +
                            'STACK USAGE 2/3\n' +
                            'null\n' +
                            'STACK USAGE 1/3\n' +
                            '(16,9)\n' +
                            'STACK USAGE 0/3\n' +
                            'STACK EMPTY\n'
            ],
            [
                    'input': 'create 44 18\n' +
                            'load /load\n' +
                            '.....X....X......................X....X.....\n' +
                            '....XXX..XXX....................XXX..XXX....\n' +
                            '....XXX..XXX....................XXX..XXX....\n' +
                            '....XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX....\n' +
                            '....XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXX....................XXXXXXXX....\n' +
                            '....XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX....\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '.XXXXXXXXXXXXXX..............XXXXXXXXXXXXXX.\n' +
                            '.XXXXXXXXXXXXXX..............XXXXXXXXXXXXXX.\n' +
                            '.XXXXXXXXXXXXXX..............XXXXXXXXXXXXXX.\n' +
                            '/load\n' +
                            'grow X\n' +
                            'grow X\n' +
                            'print\n' +
                            'grow X\n' +
                            'grow X\n' +
                            'undo\n' +
                            'undo\n' +
                            'print\n',
                    'output': '...XXXXXXXXXX..................XXXXXXXXXX...\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.\n' +
                            'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXX..........XXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXX..........XXXXXXXXXXXXXXXXX\n' +
                            '\n' +
                            'STACK USAGE 4/6\n' +
                            'STACK USAGE 3/6\n' +
                            '...XXXXXXXXXX..................XXXXXXXXXX...\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXX................XXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '..XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX..\n' +
                            '.XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.\n' +
                            'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXX..........XXXXXXXXXXXXXXXXX\n' +
                            'XXXXXXXXXXXXXXXXX..........XXXXXXXXXXXXXXXXX\n' +
                            '\n'
            ],
            [
                    'input': 'create 40 24\n' +
                            'load !\n' +
                            '........................................\n' +
                            '...................................MM...\n' +
                            '..............................MMMMMM,...\n' +
                            '.........................,MMMMMMMMMM....\n' +
                            '....................,MMMMMMMMMMMMMM.....\n' +
                            '...XXX..........MMMMMMMMMMMMMMMMMMM.....\n' +
                            '...XXX............MMMMMMMMMMMMMMMM......\n' +
                            '...XXX.............MMMMMMMMMMMMMMM......\n' +
                            '...XXX............MMMMMMMMMMMMMMM,......\n' +
                            '...XXX..........+MMMMMMMMMMMMMMMM.......\n' +
                            '...XXX.........MMMMMMMMMMMMMMMMM........\n' +
                            '.............MMMMMMMMMMMMMMMMMMM........\n' +
                            '............MMMMMMMMMMMMMM.MMMM,........\n' +
                            '..........MMMMMMMMMMMMMM+....MM.........\n' +
                            '........+MMMMMMMMMMMMMM.................\n' +
                            '.......MMMMMMMMMMMMMM...................\n' +
                            '.....MMMMMMMMMMMMMMM....................\n' +
                            '....MMMMMMMMMMMMMM......................\n' +
                            '..MMMMMMMMMMMMMM+.......................\n' +
                            '..MMMMMMMMMMMMM.........................\n' +
                            '....MMMMMMMMM...........................\n' +
                            '.....MMMMMMM............................\n' +
                            '.......MMM..............................\n' +
                            '!\n' +
                            'centroid M\n' +
                            'centroid X',
                    'output': '(19,11)\n' +
                            '(4,8)\n'
            ],
            [
                    'input': 'create 40 24\n' +
                            'load !\n' +
                            '........................................\n' +
                            '...................................MM...\n' +
                            '..............................MMMMMM,...\n' +
                            '.........................,MMMMMMMMMM....\n' +
                            '....................,MMMMMMMMMMMMMM.....\n' +
                            '................MMMMMMMMMMMMMMMMMMM.....\n' +
                            '..................MMMMMMMMMMMMMMMM......\n' +
                            '...................MMMMMMMMMMMMMMM......\n' +
                            '..................MMMMMMMMMMMMMMM,......\n' +
                            '................+MMMMMMMMMMMMMMMM.......\n' +
                            '...............MMMMMMMMMMMMMMMMM........\n' +
                            '.............MMMMMMMMMMMMMMMMMMM........\n' +
                            '............MMMMMMMMMMMMMM.MMMM,........\n' +
                            '..........MMMMMMMMMMMMMM+....MM.........\n' +
                            '........+MMMMMMMMMMMMMM.................\n' +
                            '.......MMMMMMMMMMMMMM...................\n' +
                            '.....MMMMMMMMMMMMMMM....................\n' +
                            '....MMMMMMMMMMMMMM......................\n' +
                            '..MMMMMMMMMMMMMM+.......................\n' +
                            '..MMMMMMMMMMMMM.........................\n' +
                            '....MMMMMMMMM...........................\n' +
                            '.....MMMMMMM............................\n' +
                            '.......MMM..............................\n' +
                            '........................................\n' +
                            '!\n' +
                            'transpose\n' +
                            'print\n' +
                            'explode',
                    'output': '........................\n' +
                            '........................\n' +
                            '..................MM....\n' +
                            '..................MM....\n' +
                            '.................MMMM...\n' +
                            '................MMMMMM..\n' +
                            '................MMMMMM..\n' +
                            '...............MMMMMMMM.\n' +
                            '..............+MMMMMMMM.\n' +
                            '..............MMMMMMMMM.\n' +
                            '.............MMMMMMMMM..\n' +
                            '.............MMMMMMMMM..\n' +
                            '............MMMMMMMMM...\n' +
                            '...........MMMMMMMMM....\n' +
                            '...........MMMMMMMMM....\n' +
                            '..........MMMMMMMMM.....\n' +
                            '.....M...+MMMMMMMM+.....\n' +
                            '.....M...MMMMMMMMM......\n' +
                            '.....MM.MMMMMMMMM.......\n' +
                            '.....MMMMMMMMMMMM.......\n' +
                            '....,MMMMMMMMMMM........\n' +
                            '....MMMMMMMMMMM.........\n' +
                            '....MMMMMMMMMMM.........\n' +
                            '....MMMMMMMMMM..........\n' +
                            '....MMMMMMMMM+..........\n' +
                            '...,MMMMMMMMM...........\n' +
                            '...MMMMMMMMM............\n' +
                            '...MMMMMMMMMM...........\n' +
                            '...MMMMMMMMMM...........\n' +
                            '...MMMMMMMMMMM..........\n' +
                            '..MMMMMMMMMMMM..........\n' +
                            '..MMMMMMMMMM,...........\n' +
                            '..MMMMMMMM..............\n' +
                            '..MMMMMM,...............\n' +
                            '..MMMM..................\n' +
                            '.MMM....................\n' +
                            '.M,.....................\n' +
                            '........................\n' +
                            '........................\n' +
                            '........................\n' +
                            '\n' +
                            'UNKNOWN COMMAND\n'
            ],
            [
                'input': 'create 1 1\n' +
                         'swag',
                'output': 'UNKNOWN COMMAND\n'
        ],
        [
                'input': 'create 30 27\n' +
                        'load end\n' +
                        '============,.V+.;============\n' +
                        '===========;.X##..;===========\n' +
                        '===========..####..===========\n' +
                        '==========,.##M###.:==========\n' +
                        '=========;.R##WW##=.;=========\n' +
                        '=========..##MWMW##,.=========\n' +
                        '========:.I##WWMWW#W.,========\n' +
                        '=======;.:##WWWWWW##I.;=======\n' +
                        '=======:.W########M##..=======\n' +
                        '=======.:############V.;======\n' +
                        '=======.####...,.,M###,.======\n' +
                        '======,.###:..+++;,B..#.;=====\n' +
                        '=====;.#;.#i+YXVVY:#V.#..:====\n' +
                        '====:..#..##.RYYIt##...#=.,===\n' +
                        '==;..+#;...#######W....##W..:=\n' +
                        ':..t###......iVV=....,.+#iM#..\n' +
                        '.B#i,#..,,..........,,..#,..#I\n' +
                        'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                        ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                        '.i#=MV..,,,,.,,,,,,.,,,..###..\n' +
                        ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                        '..M#M..,,,,.,.,,,,,,,:,,.=##..\n' +
                        'i###M..,...........,,:,,..###.\n' +
                        '.####........=II;.....,,.;##R.\n' +
                        ',...#....X####MW###B.....Wi..:\n' +
                        '==;,##,###;........##i...#;,==\n' +
                        '===,.IVi..,;======:..B#B#t.;==\n' +
                        'end\n' +
                        'print\n' +
                        'clear\n' +
                        'print',
                'output': '============,.V+.;============\n' +
                        '===========;.X##..;===========\n' +
                        '===========..####..===========\n' +
                        '==========,.##M###.:==========\n' +
                        '=========;.R##WW##=.;=========\n' +
                        '=========..##MWMW##,.=========\n' +
                        '========:.I##WWMWW#W.,========\n' +
                        '=======;.:##WWWWWW##I.;=======\n' +
                        '=======:.W########M##..=======\n' +
                        '=======.:############V.;======\n' +
                        '=======.####...,.,M###,.======\n' +
                        '======,.###:..+++;,B..#.;=====\n' +
                        '=====;.#;.#i+YXVVY:#V.#..:====\n' +
                        '====:..#..##.RYYIt##...#=.,===\n' +
                        '==;..+#;...#######W....##W..:=\n' +
                        ':..t###......iVV=....,.+#iM#..\n' +
                        '.B#i,#..,,..........,,..#,..#I\n' +
                        'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                        ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                        '.i#=MV..,,,,.,,,,,,.,,,..###..\n' +
                        ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                        '..M#M..,,,,.,.,,,,,,,:,,.=##..\n' +
                        'i###M..,...........,,:,,..###.\n' +
                        '.####........=II;.....,,.;##R.\n' +
                        ',...#....X####MW###B.....Wi..:\n' +
                        '==;,##,###;........##i...#;,==\n' +
                        '===,.IVi..,;======:..B#B#t.;==\n' +
                        '\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '..............................\n' +
                        '\n'
        ],
        [
                'input': 'create 20 10\n' +
                        'line 1 1 18 4 x\n' +
                        'line 1 3 18 6 o\n' +
                        'line 1 8 18 8 #\n' +
                        'print',
                'output': '....................\n' +
                        '.xxx................\n' +
                        '....xxxxxx..........\n' +
                        '.ooo......xxxxxx....\n' +
                        '....oooooo......xxx.\n' +
                        '..........oooooo....\n' +
                        '................ooo.\n' +
                        '....................\n' +
                        '.##################.\n' +
                        '....................\n' +
                        '\n'
        ],
        [
                'input': 'create 30 27\n' +
                        'load EOI\n' +
                        '============,.V+.;============\n' +
                        '===========;.X##..;===========\n' +
                        '===========..####..===========\n' +
                        '==========,.##M###.:==========\n' +
                        '=========;.R##WW##=.;=========\n' +
                        '=========..##MWMW##,.=========\n' +
                        '========:.I##WWMWW#W.,========\n' +
                        '=======;.:##WWWWWW##I.;=======\n' +
                        '=======:.W########M##..=======\n' +
                        '=======.:############V.;======\n' +
                        '=======.####...,.,M###,.======\n' +
                        '======,.###:..+++;,B..#.;=====\n' +
                        '=====;.#;.#i+YXVVY:#V.#..:====\n' +
                        '====:..#..##.RYYIt##...#=.,===\n' +
                        '==;..+#;...#######W....##W..:=\n' +
                        ':..t###......iVV=....,.+#iM#..\n' +
                        '.B#i,#..,,..........,,..#,..#I\n' +
                        'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                        ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                        '.i#=MV..,,,,.,,,,,,.,,,..###..\n' +
                        ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                        '..M#M..,,,,.,.,,,,,,,:,,.=##..\n' +
                        'i###M..,...........,,:,,..###.\n' +
                        '.####........=II;.....,,.;##R.\n' +
                        ',...#....X####MW###B.....Wi..:\n' +
                        '==;,##,###;........##i...#;,==\n' +
                        '===,.IVi..,;======:..B#B#t.;==\n' +
                        'EOI\n' +
                        'replace = .\n' +
                        'print',
                'output': '............,.V+.;............\n' +
                        '...........;.X##..;...........\n' +
                        '.............####.............\n' +
                        '..........,.##M###.:..........\n' +
                        '.........;.R##WW##..;.........\n' +
                        '...........##MWMW##,..........\n' +
                        '........:.I##WWMWW#W.,........\n' +
                        '.......;.:##WWWWWW##I.;.......\n' +
                        '.......:.W########M##.........\n' +
                        '........:############V.;......\n' +
                        '........####...,.,M###,.......\n' +
                        '......,.###:..+++;,B..#.;.....\n' +
                        '.....;.#;.#i+YXVVY:#V.#..:....\n' +
                        '....:..#..##.RYYIt##...#..,...\n' +
                        '..;..+#;...#######W....##W..:.\n' +
                        ':..t###......iVV.....,.+#iM#..\n' +
                        '.B#i,#..,,..........,,..#,..#I\n' +
                        'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                        ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                        '.i#.MV..,,,,.,,,,,,.,,,..###..\n' +
                        ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                        '..M#M..,,,,.,.,,,,,,,:,,..##..\n' +
                        'i###M..,...........,,:,,..###.\n' +
                        '.####.........II;.....,,.;##R.\n' +
                        ',...#....X####MW###B.....Wi..:\n' +
                        '..;,##,###;........##i...#;,..\n' +
                        '...,.IVi..,;......:..B#B#t.;..\n' +
                        '\n'
        ],
        [
                'input': 'create 30 27\n' +
                        'load end\n' +
                        '============,.V+.;============\n' +
                        '===========;.X##..;===========\n' +
                        '===========..####..===========\n' +
                        '==========,.##M###.:==========\n' +
                        '=========;.R##WW##=.;=========\n' +
                        '=========..##MWMW##,.=========\n' +
                        '========:.I##WWMWW#W.,========\n' +
                        '=======;.:##WWWWWW##I.;=======\n' +
                        '=======:.W########M##..=======\n' +
                        '=======.:############V.;======\n' +
                        '=======.####...,.,M###,.======\n' +
                        '======,.###:..+++;,B..#.;=====\n' +
                        '=====;.#;.#i+YXVVY:#V.#..:====\n' +
                        '====:..#..##.RYYIt##...#=.,===\n' +
                        '==;..+#;...#######W....##W..:=\n' +
                        ':..t###......iVV=....,.+#iM#..\n' +
                        '.B#i,#..,,..........,,..#,..#I\n' +
                        'V#...#..,,,,,.,,,,:,,,..R#..V#\n' +
                        ';#+.i#..,,,,,,,,,.,,,,,.iX.X#,\n' +
                        '.i#=MV..,,,,.,,,,,,.,,,..###..\n' +
                        ',.t##..,,,,,,,,,,,,,,:,..V##.;\n' +
                        '..M#M..,,,,.,.,,,,,,,:,,.=##..\n' +
                        'i###M..,...........,,:,,..###.\n' +
                        '.####........=II;.....,,.;##R.\n' +
                        ',...#....X####MW###B.....Wi..:\n' +
                        '==;,##,###;........##i...#;,==\n' +
                        '===,.IVi..,;======:..B#B#t.;==\n' +
                        'print',
                'output': 'INPUT MISMATCH\n'
        ],
        [
                'input': 'create 8 5\n' +
                        'line 0 0 7 0 W\n' +
                        'line 7 4 0 4 W\n' +
                        'line 0 0 0 4 #\n' +
                        'line 7 4 7 0 #\n' +
                        'print',
                'output': '#WWWWWW#\n' +
                        '#......#\n' +
                        '#......#\n' +
                        '#......#\n' +
                        '#WWWWWW#\n' +
                        '\n'
        ],
        [
                'input': 'create 17 21\n' +
                        'line 8 0 16 10 X\n' +
                        'line 16 10 8 20 X\n' +
                        'line 8 20 0 10 X\n' +
                        'line 0 10 8 0 X\n' +
                        'line 8 6 14 10 o\n' +
                        'line 14 10 8 14 o\n' +
                        'line 8 14 2 10 o\n' +
                        'line 2 10 8 6 o\n' +
                        'line 8 8 10 10 #\n' +
                        'line 10 10 8 12 #\n' +
                        'line 8 12 6 10 #\n' +
                        'line 6 10 8 8 #\n' +
                        'line 8 10 8 10 +\n' +
                        'print',
                'output': '........X........\n' +
                        '.......X.X.......\n' +
                        '......X...X......\n' +
                        '......X...X......\n' +
                        '.....X.....X.....\n' +
                        '....X.......X....\n' +
                        '...X....o....X...\n' +
                        '..X...oo.oo...X..\n' +
                        '..X..o..#..o..X..\n' +
                        '.X.oo..#.#..oo.X.\n' +
                        'X.o...#.+.#...o.X\n' +
                        '.X.oo..#.#..oo.X.\n' +
                        '..X..o..#..o..X..\n' +
                        '..X...oo.oo...X..\n' +
                        '...X....o....X...\n' +
                        '....X.......X....\n' +
                        '.....X.....X.....\n' +
                        '......X...X......\n' +
                        '......X...X......\n' +
                        '.......X.X.......\n' +
                        '........X........\n' +
                        '\n'
        ],
        [
                'input': 'create 17 21\n' +
                        'line 8 0 16 10 X\n' +
                        'line 16 10 8 20 X\n' +
                        'line 8 20 0 10 X\n' +
                        'line 0 10 8 0 X\n' +
                        'fill 8 1 X\n' +
                        'print\n' +
                        'line 8 8 10 10 .\n' +
                        'line 10 10 8 12 .\n' +
                        'line 8 12 6 10 .\n' +
                        'line 6 10 8 8 .\n' +
                        'fill 8 9 .\n' +
                        'print',
                'output': '........X........\n' +
                        '.......XXX.......\n' +
                        '......XXXXX......\n' +
                        '......XXXXX......\n' +
                        '.....XXXXXXX.....\n' +
                        '....XXXXXXXXX....\n' +
                        '...XXXXXXXXXXX...\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '.XXXXXXXXXXXXXXX.\n' +
                        'XXXXXXXXXXXXXXXXX\n' +
                        '.XXXXXXXXXXXXXXX.\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '...XXXXXXXXXXX...\n' +
                        '....XXXXXXXXX....\n' +
                        '.....XXXXXXX.....\n' +
                        '......XXXXX......\n' +
                        '......XXXXX......\n' +
                        '.......XXX.......\n' +
                        '........X........\n' +
                        '\n' +
                        '........X........\n' +
                        '.......XXX.......\n' +
                        '......XXXXX......\n' +
                        '......XXXXX......\n' +
                        '.....XXXXXXX.....\n' +
                        '....XXXXXXXXX....\n' +
                        '...XXXXXXXXXXX...\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '..XXXXXX.XXXXXX..\n' +
                        '.XXXXXX...XXXXXX.\n' +
                        'XXXXXX.....XXXXXX\n' +
                        '.XXXXXX...XXXXXX.\n' +
                        '..XXXXXX.XXXXXX..\n' +
                        '..XXXXXXXXXXXXX..\n' +
                        '...XXXXXXXXXXX...\n' +
                        '....XXXXXXXXX....\n' +
                        '.....XXXXXXX.....\n' +
                        '......XXXXX......\n' +
                        '......XXXXX......\n' +
                        '.......XXX.......\n' +
                        '........X........\n' +
                        '\n'
        ],
            [
                    'input': 'create 9 0\n' +
                            'print',
                    'output': 'INPUT MISMATCH\n'
            ],
            [
                    'input': 'create 17 21\n' +
                            'line 8 0 16 10 X\n' +
                            'line 16 10 8 20 X\n' +
                            'line 8 20 0 10 X\n' +
                            'line 0 10 8 0 X\n' +
                            'fill 17 1 X\n' +
                            'print',
                    'output': 'OPERATION FAILED\n'
            ],
            [
                    'input': 'create 41 10\n' +
                            'clear\n' +
                            'line 0 0 40 8 B\n' +
                            'clear\n' +
                            'print\n' +
                            'undo\n' +
                            'print\n',
                    'output': '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '.........................................\n' +
                            '\n' +
                            'STACK USAGE 2/3\n' +
                            'BBB......................................\n' +
                            '...BBBBB.................................\n' +
                            '........BBBBB............................\n' +
                            '.............BBBBB.......................\n' +
                            '..................BBBBB..................\n' +
                            '.......................BBBBB.............\n' +
                            '............................BBBBB........\n' +
                            '.................................BBBBB...\n' +
                            '......................................BBB\n' +
                            '.........................................\n' +
                            '\n'
            ],
            [
                    'input': 'create 13 8\n' +
                            'line 5 0 0 2 #\n' +
                            'line 7 0 12 2 #\n' +
                            'line 3 4 3 7 #\n' +
                            'line 9 7 9 4 #\n' +
                            'line 0 4 3 4 #\n' +
                            'line 12 4 9 4 #\n' +
                            'line 6 4 6 4 *\n' +
                            'print\n' +
                            'grow *\n' +
                            'print\n' +
                            'grow *\n' +
                            'grow *\n' +
                            'grow *\n' +
                            'grow *\n' +
                            'grow *\n' +
                            'grow *\n' +
                            'replace # .\n' +
                            'print\n',
                    'output': '....##.##....\n' +
                            '..##.....##..\n' +
                            '##.........##\n' +
                            '.............\n' +
                            '####..*..####\n' +
                            '...#.....#...\n' +
                            '...#.....#...\n' +
                            '...#.....#...\n' +
                            '\n' +
                            '....##.##....\n' +
                            '..##.....##..\n' +
                            '##.........##\n' +
                            '......*......\n' +
                            '####.***.####\n' +
                            '...#..*..#...\n' +
                            '...#.....#...\n' +
                            '...#.....#...\n' +
                            '\n' +
                            '......*......\n' +
                            '....*****....\n' +
                            '..*********..\n' +
                            '*************\n' +
                            '....*****....\n' +
                            '....*****....\n' +
                            '....*****....\n' +
                            '....*****....\n' +
                            '\n'
            ],
            [
                    'input': 'create 30 10\n' +
                            'load !\n' +
                            '..............................\n' +
                            '...X..........................\n' +
                            '....................XXX.......\n' +
                            '...........XXXXX......X.X.....\n' +
                            '...........XXXXXX.....X.X.....\n' +
                            '....X....XXXXXXX.......X......\n' +
                            '...oX......XXXXX..............\n' +
                            '..oooo.......XX..........XXX..\n' +
                            '...oo.........X...............\n' +
                            '..............................\n' +
                            '!\n' +
                            'straighten X\n' +
                            'print\n',
                    'output': '..............................\n' +
                            '..............................\n' +
                            '..............................\n' +
                            '...........XXXXX..............\n' +
                            '...........XXXXX..............\n' +
                            '...........XXXXX..............\n' +
                            '...o.......XXXXX..............\n' +
                            '..oooo.......XX...............\n' +
                            '...oo.........................\n' +
                            '..............................\n' +
                            '\n'
            ]
    ]

    void testData() {
        for (def entry in data) {
            // arrange
            def input           = entry['input']
            def expectedOutput  = entry['output']

            // act
            setup(input)
            System.out.println("Input: " + input);
            app.run()

            // assert
            assert Arrays.equals(output.toByteArray(), expectedOutput.getBytes()): "Output != Expected Got: \n"+output.toString()+"\n________ Expected: ______ \n"+expectedOutput.toString()
        }
    }

    private void setup(String inp) {
        def  bytes            = inp.getBytes()
        output                = new ByteArrayOutputStream()
        input                 = new ByteArrayInputStream(bytes)

        final IOHelper helper = new IOHelper(input, output)

        app = new ShopApp(helper)
    }
}
